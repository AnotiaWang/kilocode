class EventEmitter {
  private listeners: Array<{ event: string, callback: Function }> = [];

  // FIXME: Memory leak - listeners not being cleaned up
  on(event: string, callback: Function) {
    this.listeners.push({ event, callback });
  }

  off(event: string, callback: Function) {
    this.listeners = this.listeners.filter(
      listener => listener.event !== event || listener.callback !== callback
    );
  }

  cleanup() {
    this.listeners = [];
  }
}